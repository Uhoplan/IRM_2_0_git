<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg xmlns:atv="http://webmi.atvise.com/2007/svgext" height="100" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.2" xmlns="http://www.w3.org/2000/svg" width="100">
 <defs/>
 <metadata>
  <atv:parameter name="max" behavior="optional" defaultvalue="" valuetype="address"/>
  <atv:gridconfig enabled="false" height="20" gridstyle="lines" width="20"/>
  <atv:snapconfig enabled="false" height="10" width="10"/>
 </metadata>
 <svg atv:refpx="175" transform="matrix(9.8778,0,0,9.8778,0,0)" atv:refpy="140.002" xlink:href="SYSTEM.LIBRARY.PROJECT.RESOURCES%2Fgaugeparam%2Fredpart.svg" height="28.346" y="0" id="id_1" width="35.433" x="0"/>
 <svg atv:refpx="175" transform="matrix(9.8778,0,0,9.8778,0,0)" atv:refpy="140.002" xlink:href="SYSTEM.LIBRARY.PROJECT.RESOURCES%2Fgaugeparam%2Fyellowpart.svg" height="28.346" y="0" id="id_4" width="35.433" x="0"/>
 <svg atv:refpx="175" transform="matrix(9.8778,0,0,9.8778,0,0)" atv:refpy="140.002" xlink:href="SYSTEM.LIBRARY.PROJECT.RESOURCES%2Fgaugeparam%2Fbluepart.svg" height="28.346" y="0" id="id_5" width="35.433" x="0"/>
 <svg atv:refpx="175" transform="matrix(9.8778,0,0,9.8778,0,0)" atv:refpy="140.002" xlink:href="SYSTEM.LIBRARY.PROJECT.RESOURCES%2Fgaugeparam%2Fgreypart.svg" height="28.346" y="0" id="id_6" width="35.433" x="0"/>
 <circle atv:refpx="0" r="48" cy="0" atv:refpy="0" stroke-width="0" fill="#1f1f1f" id="id_12" stroke="#0000ff" cx="0"/>
 <script type="text/ecmascript"><![CDATA[var max=10;
webMI.data.read(webMI.query['max'], function(e) {
   max =e.value 
   if(max<30){max=30}
});



//var max=webMI.query["max"].value

var grey_part=document.getElementById("id_6")
var blue_part=document.getElementById("id_5")
var yellow_part=document.getElementById("id_4")
var red_part=document.getElementById("id_1")
var blue_min=0.65
var blue_mult=1-blue_min
grey_part.children[2].style.transition='0.5s ease'
blue_part.children[2].style.transition='0.5s ease'
yellow_part.children[2].style.transition='0.5s ease'
red_part.children[2].style.transition='0.5s ease'
webMI.data.subscribe(webMI.query["base"], function(e) {
if (e.value>max)
	{
		
		max=e.value;	
	}
	var value=e.value/max;
	
	//console.log(value)
	var zerostr="scale(0,0)"
	var fullstr="scale(1,1)"
	if(value<0.1){
		 red_part.children[2].style.WebkitTransform=zerostr;
		 yellow_part.children[2].style.WebkitTransform=zerostr;
		 blue_part.children[2].style.WebkitTransform=zerostr;
		 grey_part.children[2].style.WebkitTransform="scale(1,1)"
		 
	}else if(value<0.8){
		red_part.children[2].style.WebkitTransform=zerostr;
		yellow_part.children[2].style.WebkitTransform=zerostr;
		grey_part.children[2].style.WebkitTransform=zerostr;
		//console.log("blue")
		var est_value=0.65+(((value-0.1)/7*10)*0.35)
		//console.log(est_value)
		var str="scale("+est_value+","+est_value+")"
		blue_part.children[2].style.WebkitTransform=str
		
	}else if(value<0.9){
		red_part.children[2].style.WebkitTransform=zerostr;
		grey_part.children[2].style.WebkitTransform=zerostr;
		blue_part.children[2].style.WebkitTransform=fullstr;
		var est_value=0.88+((value-0.8)*10*0.12)
		//console.log(est_value)
		//console.log("yellow")
		var str="scale("+est_value+","+est_value+")"
		yellow_part.children[2].style.WebkitTransform=str;
	}else{
		blue_part.children[2].style.WebkitTransform=fullstr;
		yellow_part.children[2].style.WebkitTransform=fullstr;
		grey_part.children[2].style.WebkitTransform=zerostr;
		//console.log("red")
		var est_value=0.9+((value-0.9)*10*0.1)
		//console.log(est_value)
		var str="scale("+est_value+","+est_value+")"
		red_part.children[2].style.WebkitTransform=str
	}
});
]]></script>
</svg>
